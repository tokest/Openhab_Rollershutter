//
//  For use this template search for "Jxx_Bx" and replace it with the right value
//  Jxx_Bx_ACTIVITY_STATE = STABLE / UP / DOWN /

// **************************************************************************
rule "Jalousie B41 up"
//
when 
  Item JT1_B4_UP changed to OFF
then
//
  logInfo("","INFO-001: Der Taster JT1_B4_UP wurde betaetigt")
  logInfo("","INFO-002: The state of JM1_B4_ACTIVITY_STATE is >>> " + JM1_B4_ACTIVITY_STATE.state.toString + " <<<")
  sendCommand(JT1_B4_UP,ON)
  //
  if (JM1_B4_ACTIVITY_STATE.state == "STABLE") {
    sendCommand(JM1_B4_level,99)	
    logInfo("","INFO-003: JM1_B4 goes UP because it was STABLE")
  } else {
      if (JM1_B4_ACTIVITY_STATE.state == "DOWN") {
      logInfo("","INFO-004: JM1_B4 stopps because was going DOWN")
      sendCommand(JM1_B4_STOP,ON)
    }    
  }
end

// **************************************************************************
rule "Jalousie B41 down"
when 
  Item JT1_B4_DOWN changed to ON
then
//
  logInfo("","INFO-011: Taster JT1_B4_DOWN CHANGED to ON")
  logInfo("","INFO-012: The state of JM1_B4_ACTIVITY_STATE is >>> " + JM1_B4_ACTIVITY_STATE.state.toString + " <<<")
  sendCommand(JT1_B4_DOWN,OFF)
  //
  if (JM1_B4_ACTIVITY_STATE.state == "STABLE") {
    sendCommand(JM1_B4_level,0)
    logInfo("","INFO-013: JM1_B4 goes DOWN because it was STABLE")
  } else {
      if (JM1_B4_ACTIVITY_STATE.state == "UP") {
      logInfo("","INFO-014: JM1_B4 stopps because was going UP")
      sendCommand(JM1_B4_STOP,ON)
    }    
  }
end

// **************************************************************************
rule "Jalousie B42 up"
//
when 
  Item JT2_B4_UP changed to OFF
then
//
  logInfo("","INFO-001: Der Taster JT2_B4_UP wurde betaetigt")
  logInfo("","INFO-002: The state of JM2_B4_ACTIVITY_STATE is >>> " + JM2_B4_ACTIVITY_STATE.state.toString + " <<<")
  sendCommand(JT2_B4_UP,ON)
  //
  if (JM2_B4_ACTIVITY_STATE.state == "STABLE") {
    sendCommand(JM2_B4_level,99)	
    logInfo("","INFO-003: JM2_B4 goes UP because it was STABLE")
  } else {
      if (JM2_B4_ACTIVITY_STATE.state == "DOWN") {
      logInfo("","INFO-004: JM2_B4 stopps because was going DOWN")
      sendCommand(JM2_B4_STOP,ON)
    }    
  }
end

// **************************************************************************
rule "Jalousie B42 down"
when 
  Item JT2_B4_DOWN changed to ON
then
//
  logInfo("","INFO-011: Taster JT2_B4_DOWN CHANGED to ON")
  logInfo("","INFO-012: The state of JM2_B4_ACTIVITY_STATE is >>> " + JM2_B4_ACTIVITY_STATE.state.toString + " <<<")
  sendCommand(JT2_B4_DOWN,OFF)
  //
  if (JM2_B4_ACTIVITY_STATE.state == "STABLE") {
    sendCommand(JM2_B4_level,0)
    logInfo("","INFO-013: JM2_B4 goes DOWN because it was STABLE")
  } else {
      if (JM2_B4_ACTIVITY_STATE.state == "UP") {
      logInfo("","INFO-014: JM2_B4 stopps because was going UP")
      sendCommand(JM2_B4_STOP,ON)
    }    
  }
end
